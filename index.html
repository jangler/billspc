<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Bill's PC</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <script src="data/dex.js"></script>
    <script src="data/items.js"></script>
    <script src="data/moves.js"></script>
    <script src="billspc.js"></script>
  </head>
  <body>
    <p>Select a .sav file:</p>
    <input type="file" accept=".sav" onchange="handleFiles(this.files)">
    <div id="errorDiv" style="display: none;">
      <p id="errorText"></p>
    </div>
    <div id="resultDiv" style="display: none;">
      <p>Party:</p>
      <textarea id="partyText" rows="10" cols="40"></textarea>
      <p>PC:</p>
      <textarea id="pcText" rows="10" cols="40"></textarea>
    </div>
    <script>
const errorDiv = document.getElementById('errorDiv');
const errorText = document.getElementById('errorText');
const resultDiv = document.getElementById('resultDiv');
const partyText = document.getElementById('partyText');
const pcText = document.getElementById('pcText');

function handleFiles(files) {
  if (!files.length) {
    resultDiv.style.display = 'none';
    errorDiv.style.display = 'block';
    errorText.innerText = 'No files selected.';
  } else {
    const reader = new FileReader();
    reader.addEventListener('loadend', function() {
      const txt = sav2txt(reader.result);
      if (txt.error) {
        resultDiv.style.display = 'none';
        errorDiv.style.display = 'block';
        errorText.innerText = txt.error;
      } else {
        errorDiv.style.display = 'none';
        resultDiv.style.display = 'block';
        partyText.innerHTML = txt.party;
        pcText.innerHTML = txt.pc;
      }
    });
    reader.readAsArrayBuffer(files[0]);
  }
}
    </script>
  </body>
</html>
